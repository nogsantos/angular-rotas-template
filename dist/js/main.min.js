var app=angular.module("app",["ui.router","ngMaterial","ngAnimate","ngStorage","angular-loading-bar","ngFlash"]);app.constant("config",{appName:"SisClient",appVersion:"0.0.1",apiUrl:"https://serverapp-api.herokuapp.com/v1"}),function(){"user strict";app.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){b.otherwise("/erro"),a.state("login",{url:"/",templateUrl:"login.html",controller:"loginController",controllerAs:"ctrl",data:{requireLogin:!1}}).state("dashboard",{url:"/home",templateUrl:"dashboard.html",controller:"dashboardController",controllerAs:"ctrl",data:{requireLogin:!0}}).state("sobre",{url:"/sobre",templateUrl:"about.html",controller:"aboutController",controllerAs:"abt",data:{requireLogin:!0}}).state("usuarios",{url:"/usuarios",templateUrl:"users.html",controller:"userController",controllerAs:"ctrl",data:{requireLogin:!0}}).state("contato",{url:"/contato",templateUrl:"contact.html",controller:"contactController",controllerAs:"ct",data:{requireLogin:!0}}).state("erro",{url:"/erro",templateUrl:"error.html",controller:"erroController",controllerAs:"ctrl",data:{requireLogin:!0}})}])}(),function(){"user strict";app.controller("aboutController",["$scope","$http","$location","Flash","config",function(a,b,c,d,e){function f(){b.get(e.apiUrl+"/tweets").success(function(b){a.q=b.data}).error(function(a,b){var c="<strong>"+b+"- Erro</strong>"+a.meta.error.message;d.create("warning",c)})}var g=function(){a.title="Sobre",f()};g()}])}(),function(){"user strict";app.controller("contactController",["$scope",function(a){a.title="Contato";var b=3;a.caracter_count=b,a.customers=[{name:"Dave Jones",city:"Phoenix"},{name:"Jame Riley",city:"Atlanta"},{name:"Heedy Walling",city:"Chandler"},{name:"Thomas Winter",city:"Seatle"},{name:"John Snool",city:"Black Walls"},{name:"Havel",city:"Dragon City"},{name:"Lucatiel",city:"Mirrah"}],a.addCustomer=function(){var b={name:a.nome,city:a.cidade};a.customers.push(b)},a.validLength=function(){return a.cidade.length<b|!1}}])}(),function(){"user strict";app.controller("dashboardController",["$scope","$mdDialog",function(a,b){a.title="Dashboard"}])}(),function(){"user strict";app.controller("erroController",["$scope",function(a){a.pagina="Erro",console.log(a)}])}(),function(){"user strict";app.controller("loginController",["$scope","$localStorage","$sessionStorage","LoginFactory","Flash",function(a,b,c,d,e){function f(a){b.lu={access_token:a.data[0].access_token,token_type:a.data[0].token_type},c.su={access_token:a.data[0].access_token,token_type:a.data[0].token_type},window.location="#/home"}a.init=function(){a.login={username:"nogsantos",password:"guit23"}},a.logar=function(){var b,c,g=a.login.username.trim(),h=a.login.password.trim();""!==g&&""!==h?d.doLogin(a.login,function(a){a.type===!1?alert(a.data):f(a)},function(a,b){var c="<strong>Erro: "+b+"</strong> Falha na tentativa de acesso ao sistema.";e.create("danger",c)}):(b="<strong>Atenção</strong> Campo(s) obrigatório(s) precisa(m) ser preenchido(s).",c=e.create("warning",b))},a.init()}]).factory("LoginFactory",["$http","config",function(a,b){return{doLogin:function(c,d,e){a.post(b.apiUrl+"/access_tokens",c).success(d).error(e,status)}}}])}(),function(){"user strict";app.controller("mainController",["$scope","$http","$localStorage","$sessionStorage","config",function(a,b,c,d,e){var f=function(){a.title="Dashboard"};a.logout=function(){confirm("Sair do sistema com segurança?")&&b["delete"](e.apiUrl+"/access_tokens/"+c.lu.access_token).success(function(){c.$reset(),d.$reset(),window.location="/"}).error(function(a,b){console.log(a),console.log(b)})},f()}])}(),function(){"user strict";app.controller("userController",["$scope","$http","$location","Flash","config",function(a,b,c,d,e){function f(){b.get(e.apiUrl+"/users").success(function(b){a.q=b.data,a.meta=b.meta}).error(function(a,b){var c="<strong>"+b+"- Erro</strong>"+a.meta.error.message;d.create("warning",c)})}var g=function(){a.title="Usuários",f()};g()}])}(),function(){"user strict";app.config(["$mdThemingProvider","$localStorageProvider","$sessionStorageProvider","$httpProvider","cfpLoadingBarProvider",function(a,b,c,d,e){var f=a.extendPalette("blue",{500:"497799"});a.definePalette("neonBlue",f),a.theme("default").primaryPalette("neonBlue"),b.setKeyPrefix("_hsh."),c.setKeyPrefix("_hsh."),d.interceptors.push("httpRequestInterceptor"),e.spinnerTemplate='<div id="loading-bar-container"><span class="fa fa-spinner fa-pulse fa-3x fa-fw"></div>'}]),app.run(["$rootScope","$http","$location","$localStorage","$sessionStorage","Flash","config",function(a,b,c,d,e,f,g){function h(){d.lu||e.su?(a.menu=[{link:"dashboard",label:"Home",tooltip:"Pagina inicial",icone:"home"},{link:"sobre",label:"Sobre",tooltip:"Sobre o sistema",icone:"question-circle"},{link:"contato",label:"Contato",tooltip:"Contato",icone:"pencil"},{link:"usuarios",label:"Usuários",tooltip:"Usuários cadastrados no sistema",icone:"users"}],a.logoutButton=!0):(a.menu=[],a.logoutButton=!1)}a.sysname=g.appName+" ["+g.appVersion+"]",a.$on("$stateChangeStart",function(b,c){a.page=c.name,f.clear();var g=c.data.requireLogin;if(g&&(!d.lu||!e.su)){window.location="#/",b.preventDefault();var i="<strong>Atenção!</strong> Você precisa ser autenticado para acessar essa área no sistema.";f.create("warning",i)}h()})}])}(),function(){"user strict";app.factory("httpRequestInterceptor",["$localStorage",function(a){return{request:function(b){return b.headers.Authorization="undefined"!=typeof a.lu?a.lu.access_token:'Basic realm="AppServer"',b.headers.Accept="application/json;odata=verbose",b}}}])}(),function(){"user strict"}();